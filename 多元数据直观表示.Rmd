---
title: "多元数据的直观表示"
author: "shixiangzhou"
date: "2015年10月5日"
output: html_document
---

#概述

在对数据进行任何统计分析之前，都需要对数据进行探索性的分析，以了解资料的性质，特别是高维空间的的多元数据。

多元的高维图示很难绘制。但一旦绘制成功，就能看出多元之间的变量关系。

方法大体有两类，一类是使得高维空间的点与平面上的某种图形对应，这种图形能反映高维数据的某些特点或数据间的某些关系。

另一类方法是在尽可能多地保留原始数据信息的原则下进行降维，若能使数据降到二维或一维，则可在平面上作图。

 设变量个数为$p$,样品数为$n$,第$i$个样品观测记为$X_i=(x_{i1},x_{i2},\cdots,x_{ip}),i=1,2,\cdots,n$,$n$个样品的观测数据组成的矩阵为$X=(x_{ij})_{n*p}$。
 
#均值条图及R的使用 
 
*例题1* 为了研究我国31个省市2007年城镇居民生活消费的分布规律，根据调查资料以区域消费类型划分，指标名称如下：样品数$n=31$ ,变量个数$p=8$ .

食品：人均食品支出(元/人)；

衣着：人均衣着商品支出(元/人)；

设备：人均家庭设备用品及服务支出(元/人)；

医疗：人均医疗保健支出(元/人)；

交通：人均交通和通信支出(元/人)；

教育：人均娱乐教育支出(元/人)；

居住：人均居住支出(元/人)；

杂项：人均杂项商品和服务支出(元/人)。

```{r}
#此案例数据见mvstats.xls:d3.1
X=read.table("clipboard",header=T)#将剪切板数据读入数据框X中   
barplot(apply(X,1,mean),las=3)#按行做均值条形图

```

*************************

```{r}
barplot(apply(X,2,mean))#按列做均值图条形图
```

```{r}
barplot(apply(X[,2:8],2,mean))#去掉第一列后的数据按列做均值条形图
 
```

```{r}
 
barplot(apply(X,2,median))#按列做中位数条形图
pie(apply(X,2,mean))#按列做均值饼图
```

```{r}
 
 
pie(apply(X,2,mean))#按列做均值饼图
```

**均值条图通常用来比较各个变量在不同观察单位上的均值变化大小，可见贵州，甘肃，青海的居民消费要低于北上广；居民在食品方面的支出远大于其他方面**

##星相图

是雷达图的多元表示形式，它将每个变量的各个观察单位的数值表示为一个图形，$n$个观察单位就有$n$个图，每个图的每个角表示每个变量。


*****************

`stars(X,full=T,draw.segments=T,...)`语法要点：

x数值矩阵或数据框，full=TRUE，圆形，full=FALSE，半圆，draw.segments分支形状，draw.segments=T,圆形，draw.segments=F，半圆。

```{r}
stars(X,full=T,key.loc=c(13,1.5))#具有图例的360度星相图


```

```{r}
stars(X,full=F,key.loc=c(13,1.5))#具有图例的180度星相图

```

```{r}
 stars(X,full=T,draw.segments=T,key.loc=c(13,1.5))#具有图例的360度彩色圆形星相图


```

```{r}
 
stars(X,full=F,draw.segments=T,key.loc=c(13,1.5))#具有图例的180度彩色圆形星相图

```


每个星相图的一个角表示一个变量，从图中可以看出，北京，上海，广东，浙江的哥地区消费情况比较突出。

##脸谱图及R使用

1973年，Chernooff. H. 提出将每个指标用人的脸型的某一部位的形状或大小来表达，p个指标的数值就可以勾画出一个人的脸谱，反映了所对应的样品之间差异特征。

语法很简单，从字面就能理解。

```{r}
library(aplpack)#加载aplpack包
faces(X,ncol.plot=7)#按每行7个做脸谱图

```

```{r}
faces(X[,2:8],ncol.plot=7)#去掉第一个变量按每行7个做脸谱图

```

```{r}

faces(X[c(1,9,19,28,29,30),])#选择第1,9,19,28,29,30个观测的多元数据做脸谱图
```

构造脸谱的思想是相当重要的，具有极大的现实意义。

##调和曲线图

又称三角多项式图，基本思想是把高维空间中的一个样本点对应于二维平面上的一条曲线。

设$p$维数据$x=(x_1,x_2,\cdots,x_p)'$，对应的曲线是：
$$
f_x(t)=frac{x_1}{sqrt(2)}+x_2 \sin(t)+x_3 \cos(t)+x_4\sin(2t)+\cdots(-\pi\let\le \pi)
$$

上式中当$t$在区间$[-\pi,\pi]$上变化时，其轨迹是一条曲线。

这种图对聚类分析帮助很大，如果选择聚类统计量为距离的话，同类曲线会非常靠近导致拧在一起。

```{r}
library(mvstats)#加载mvstats包
plot.andrews(X)#绘制调和曲线图

```

```{r}
plot.andrews(X[c(1,9,19,28,29,30),])#选择第1,9,19,28,29,30个观测的多元数据做调和曲线图
```


**案例分析题**

区域城市现代化水平的直观分析

城市经济指标：X1---人均GDP(元/人)

X2---第三产业增加值占GDP比重(%)

城市社会指标：X3---城镇人口占常住人口比率(%)

城市人民生活指标：X4---居民人均可支配收入(元)

     X5----每十万人拥有的医生数
    
    城市人口素质指标：X6---每万人中专业技术人员数
    
    X7---每百人公共图书馆藏书数
    
    城市基础设施指标： X8---人均道路铺装面积(平方米/人)
    
    X9---每万人拥有的公共汽车，电车数
    
    城市环境因素指标：X10---工业废水达标率(%)
    
    查阅《广东统计年鉴2006》获得数据。
    
    数据见mvcase.xls$Case2.
    
```{r}
#在mvcase.xls"的表单Case2中选择数据并复制
Case2=read.table("clipboard",header=T);Case2
summary(Case2)
RM=rowMeans(Case2);RM
barplot(RM,las=3)#按行做均值图
CM=colMeans(Case2);
CM
```

```{r}
barplot(CM)#按列做均值图
boxplot(Case2)
```

```{r}
stars(Case2,key.loc=c(8,1.6))
stars(Case2,draw.segments=T,key.loc=c(8,1.6))
```

```{r}
library(aplpack) #需安装aplpack包 
faces(Case2)
```


```{r}
library(mvstats) #load('mvstats.RData')
plot.andrews(Case2)  
```





如有错误请联系 [e-mail]:shixiangbupt@qq.com.